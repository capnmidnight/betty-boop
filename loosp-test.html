<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<script type="text/javascript" src="loosp.js"></script>
<script type="text/loosp">
    // a comment
(define (log)
    (console.log.apply console arguments))

(log @"the quick brown
    fox jumps over
    the lazy dog.")
(class (Shape width height)
    (set! this.width width)
    (set! this.height height)
    (method (describe)
        (log (this.getType)
             @"Area:"
            (* this.width this.height))))

(class (Square:Shape size)
    (base size size))

(define square (new Square 10))
(send square describe)
(log (send square getType))
(set! square null)
(log (send square getType))

(define (f a b c...)
    (log "%s, %s {%s}" a b (c.join " -> ")))

(f "a" "b" "c" 2 3 4 5)

(define (obj parts...)
    (define output {})
    (while (> parts.length 0)
        (define name (parts.shift))
        (define value (parts.shift))
        (set! output[name] value))
    output)

(log {"a":[1 2 3]
    "b":4
    "c":"asdf"
    "d":{"e":5 "f":[6 7 8]}})
</script>
</head>
<body onload="loosp2js(true)">
</body>
</html>
